graph TB
    %% ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼<br/>ãƒ–ãƒ©ã‚¦ã‚¶]
    Developer[ğŸ‘¨â€ğŸ’» é–‹ç™ºè€…<br/>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º]
    Internet[ğŸŒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ]
    
    %% AWSæœ¬ç•ªç’°å¢ƒ
    subgraph AWS["â˜ï¸ AWS æœ¬ç•ªç’°å¢ƒ"]
        Route53[ğŸŒ Route53<br/>DNSç®¡ç†]
        CloudFront[ğŸš€ CloudFront CDN]
        ALB[ğŸ”„ Application Load Balancer]
        
        subgraph ECS["ğŸ³ Amazon ECS"]
            ECS_nginx[nginx Container<br/>Port: 80]
            ECS_frontend[React Container<br/>Port: 3000]
            ECS_backend[Flask Container<br/>Port: 5001]
        end
        
        EFS[ğŸ“ Amazon EFS<br/>JSON Database]
        S3[ğŸ“¦ Amazon S3<br/>é™çš„ãƒ•ã‚¡ã‚¤ãƒ«]
        RDS[ğŸ—„ï¸ Amazon RDS<br/>å°†æ¥ç§»è¡Œäºˆå®š]
        ECR[ğŸ“¦ Amazon ECR<br/>ã‚³ãƒ³ãƒ†ãƒŠä¿å­˜]
        CloudWatch[ğŸ“Š CloudWatch<br/>ç›£è¦–ãƒ»ãƒ­ã‚°]
    end
    
    %% é–‹ç™ºç’°å¢ƒ
    subgraph DevEnv["ğŸ’» é–‹ç™ºç’°å¢ƒ"]
        subgraph Docker["ğŸ³ Dockerç’°å¢ƒ"]
            Dev_nginx[nginx Container<br/>Port: 80]
            Dev_frontend[React Container<br/>Port: 3000] 
            Dev_backend[Flask Container<br/>Port: 5001]
        end
        
        subgraph LocalFiles["ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«"]
            frontend_code[frontend/<br/>React + Vite]
            backend_code[backend/<br/>Flask API]
            nginx_config[nginx/<br/>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«]
            json_data[data/<br/>JSON Database]
        end
    end
    
    %% CI/CD
    subgraph Pipeline["ğŸ”„ CI/CD Pipeline"]
        GitHub[ğŸ“š GitHub<br/>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰]
        Actions[âš™ï¸ GitHub Actions<br/>è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤]
    end
    
    %% JSON Databaseè©³ç´°
    subgraph JSONFiles["ğŸ“„ JSON Database"]
        users_json[users.json<br/>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿]
        products_json[products.json<br/>å•†å“ãƒ‡ãƒ¼ã‚¿]
        orders_json[orders.json<br/>æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿]
        config_json[config.json<br/>è¨­å®šãƒ‡ãƒ¼ã‚¿]
    end
    
    %% ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€²åŒ–
    subgraph Evolution["ğŸ”„ DBé€²åŒ–ãƒ‘ã‚¹"]
        Phase1[Phase1: JSON<br/>é«˜é€Ÿé–‹ç™º]
        Phase2[Phase2: SQLite<br/>æ§‹é€ åŒ–]
        Phase3[Phase3: PostgreSQL<br/>æœ¬æ ¼é‹ç”¨]
    end
    
    %% ã‚¢ã‚¯ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼ï¼ˆæœ¬ç•ªï¼‰
    User --> Internet
    Internet --> Route53
    Route53 --> CloudFront
    CloudFront --> ALB
    CloudFront --> S3
    ALB --> ECS_nginx
    ECS_nginx --> ECS_frontend
    ECS_nginx --> ECS_backend
    ECS_backend --> EFS
    
    %% é–‹ç™ºãƒ•ãƒ­ãƒ¼
    Developer --> Dev_frontend
    Developer --> Dev_nginx
    Developer --> Dev_backend
    Dev_backend --> json_data
    
    %% JSONæ§‹æˆ
    json_data --> users_json
    json_data --> products_json
    json_data --> orders_json
    json_data --> config_json
    
    %% ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€²åŒ–
    Phase1 --> Phase2
    Phase2 --> Phase3
    Phase3 --> RDS
    
    %% CI/CD
    Developer --> GitHub
    GitHub --> Actions
    Actions --> ECR
    Actions --> ECS
    
    %% ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¦ãƒ³ãƒˆ
    frontend_code -.-> Dev_frontend
    backend_code -.-> Dev_backend
    nginx_config -.-> Dev_nginx
    
    %% AWSå†…éƒ¨æ¥ç¶š
    ECS_nginx --> ECS_frontend
    ECS_nginx --> ECS_backend
    ECS --> CloudWatch
    
    %% æœ¬ç•ªãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
    EFS --> users_json
    EFS --> products_json
    EFS --> orders_json
    EFS --> config_json
    
    %% ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
    classDef awsService fill:#ff9900,stroke:#146eb4,stroke-width:2px,color:#ffffff
    classDef devService fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef container fill:#0db7ed,stroke:#2496ed,stroke-width:2px,color:#ffffff
    classDef jsonFile fill:#ffc107,stroke:#795548,stroke-width:2px
    classDef pipeline fill:#28a745,stroke:#155724,stroke-width:2px,color:#ffffff
    classDef user fill:#6f42c1,stroke:#495057,stroke-width:2px,color:#ffffff
    classDef evolution fill:#6c757d,stroke:#343a40,stroke-width:2px,color:#ffffff
    
    class Route53,CloudFront,ALB,EFS,S3,RDS,ECR,CloudWatch,AWS awsService
    class DevEnv,Docker,LocalFiles devService
    class Dev_nginx,Dev_frontend,Dev_backend,ECS_nginx,ECS_frontend,ECS_backend,ECS container
    class users_json,products_json,orders_json,config_json,JSONFiles,json_data jsonFile
    class Pipeline,GitHub,Actions pipeline
    class User,Developer,Internet user
    class Evolution,Phase1,Phase2,Phase3 evolution